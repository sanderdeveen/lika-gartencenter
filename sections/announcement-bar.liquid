{%- for block in section.blocks -%}
  {%- case block.type -%}
    {%- when 'announcement' -%}
      <div class="announcement-bar">
        <button class="shadow announcement-bar-close" onclick="closeAnnouncement()">{%- render 'global-icon' icon: 'close' -%}</button>
        <div role="region" style="display: flex;" aria-label="{{ 'sections.header.announcement' | t }}" {{ block.shopify_attributes }}>
          <div class="announcement-bar__message">
            {%- if block.settings.rich_text != blank -%}
              <figure>
                <img src="https://cdn.shopify.com/s/files/1/0614/8728/4404/files/gartencenter-logo-hallo-deutschland.png?v=1670921410" alt="Gartencenter.de" width="200" height="auto" loading="lazy">
              </figure>
              <span>
                {{ block.settings.rich_text }}
              </span>
              {%- if block.settings.link != blank -%}
                <a href="{{ block.settings.link_text }}" class="link link--text focus-inset animate-arrow">
                  {{ block.settings.link_text }} {% render 'icon-arrow' %}
                </a>
              {%- endif -%}
            {%- endif -%}
          </div>
          <img class="announcement-bar__image-mob"
            srcset="{%- if block.settings.image_mob.width >= 375 -%}{{ block.settings.image_mob | image_url: width: 375 }} 375w,{%- endif -%}
            {%- if block.settings.image_mob.width >= 750 -%}{{ block.settings.image_mob | image_url: width: 750 }} 750w,{%- endif -%}
            {%- if block.settings.image_mob.width >= 1100 -%}{{ block.settings.image_mob | image_url: width: 1100 }} 1100w,{%- endif -%}
            {%- if block.settings.image_mob.width >= 1500 -%}{{ block.settings.image_mob | image_url: width: 1500 }} 1500w,{%- endif -%}
            {%- if block.settings.image_mob.width >= 1780 -%}{{ block.settings.image_mob | image_url: width: 1780 }} 1780w,{%- endif -%}
            {%- if block.settings.image_mob.width >= 2000 -%}{{ block.settings.image_mob | image_url: width: 2000 }} 2000w,{%- endif -%}
            {%- if block.settings.image_mob.width >= 3000 -%}{{ block.settings.image_mob | image_url: width: 3000 }} 3000w,{%- endif -%}
            {%- if block.settings.image_mob.width >= 3840 -%}{{ block.settings.image_mob | image_url: width: 3840 }} 3840w,{%- endif -%}
            {{ block.settings.image_mob | image_url }} {{ block.settings.image_mob.width }}"
            sizes="100vw"
            src="{{ block.settings.image_mob | image_url: width: 1500 }}"
            loading="lazy"
            alt="{{ block.settings.image_mob.alt | escape }}"
            width="auto"
            height="auto"
          >
          <img class="announcement-bar__image"
            srcset="{%- if block.settings.image.width >= 375 -%}{{ block.settings.image | image_url: width: 375 }} 375w,{%- endif -%}
            {%- if block.settings.image.width >= 750 -%}{{ block.settings.image | image_url: width: 750 }} 750w,{%- endif -%}
            {%- if block.settings.image.width >= 1100 -%}{{ block.settings.image | image_url: width: 1100 }} 1100w,{%- endif -%}
            {%- if block.settings.image.width >= 1500 -%}{{ block.settings.image | image_url: width: 1500 }} 1500w,{%- endif -%}
            {%- if block.settings.image.width >= 1780 -%}{{ block.settings.image | image_url: width: 1780 }} 1780w,{%- endif -%}
            {%- if block.settings.image.width >= 2000 -%}{{ block.settings.image | image_url: width: 2000 }} 2000w,{%- endif -%}
            {%- if block.settings.image.width >= 3000 -%}{{ block.settings.image | image_url: width: 3000 }} 3000w,{%- endif -%}
            {%- if block.settings.image.width >= 3840 -%}{{ block.settings.image | image_url: width: 3840 }} 3840w,{%- endif -%}
            {{ block.settings.image | image_url }} {{ block.settings.image.width }}"
            sizes="100vw"
            src="{{ block.settings.image | image_url: width: 1500 }}"
            loading="lazy"
            alt="{{ block.settings.image.alt | escape }}"
            width="auto"
            height="auto"
          >
        </div>
      </div>
  {%- endcase -%}
{%- endfor -%}

{% schema %}
{
  "name": "t:sections.announcement-bar.name",
  "class": "announcement--clicked",
  "max_blocks": 1,
  "blocks": [
    {
      "type": "announcement",
      "name": "t:sections.announcement-bar.blocks.announcement.name",
      "settings": [
        {
          "type": "richtext",
          "id": "rich_text",
          "label": "t:sections.announcement-bar.blocks.announcement.settings.text.label",
          "default": "<p><strong>Hallo Deutschland,</strong><br>Gartencenter.de ist seit Ã¼ber 15 jarhen in den Niederland, Belgien und jetzt auch in Deutschland vertreten.</p>"
        },
        {
         "type": "text",
         "id": "link_text",
         "label": "Text in link"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.announcement-bar.blocks.announcement.settings.link.label"
        },
        {
          "type": "image_picker",
          "label": "Image (for mobile)",
          "id": "image_mob"
        },
        {
          "type": "image_picker",
          "label": "Image",
          "id": "image"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "announcement"
      }
    ]
  }
}
{% endschema %}

